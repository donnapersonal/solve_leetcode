# 309.Best Time to Buy and Sell Stock with Cooldown

## LeetCode 题目链接

[309.买卖股票的最佳时机含冷冻期](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/)

## 题目大意

给定一个整数数组 `prices`，其中第 `prices[i]` 表示第 `i` 天的股票价格 

设计一个算法计算出最大利润。在满足以下约束条件下，你可以尽可能地完成更多的交易（多次买卖一支股票）:
- 卖出股票后，你无法在第二天买入股票 (即冷冻期为 1 天)
  
注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）

```js
Example 1:
Input: prices = [1,2,3,0,2]
Output: 3
Explanation: transactions = [buy, sell, cooldown, buy, sell]

Example 2:
Input: prices = [1]
Output: 0
```

限制:
- 1 <= prices.length <= 5000
- 0 <= prices[i] <= 100

## 解题

这是一个动态规划问题，需要考虑每天三种状态：不持有股票、持有股票、冷冻期

主要思路是定义几种状态来表示每天的利润变化情况：
- `hold[i]`：表示在第 `i` 天结束时持有股票的最大利润
- `sold[i]`：表示在第 `i` 天结束时不持有股票且处于冷冻期的最大利润
- `rest[i]`：表示在第 `i` 天结束时不持有股票且不处于冷冻期的最大利润

状态转移方程：
- 持有股票 `hold[i]`：
  - `hold[i] = max(hold[i-1], rest[i-1] - prices[i])`
  - 要么保持前一天的持有状态 `hold[i-1]`，要么在前一天未持有股票且不处于冷冻期时买入股票 `rest[i-1] - prices[i]`
- 不持有股票且处于冷冻期 `sold[i]`：
  - `sold[i] = hold[i-1] + prices[i]`
  - 表示在今天卖出股票，所以今天结束时处于冷冻期，利润为前一天持有股票的利润加上当天的价格
- 不持有股票且不处于冷冻期 `rest[i]`：
  - `rest[i] = max(rest[i-1], sold[i-1])`
  - 要么保持前一天的休息状态 `rest[i-1]`，要么从前一天冷冻期状态恢复过来 `sold[i-1]`

初始条件：
- `hold[0] = -prices[0]`：第 `0` 天买入股票，利润为负
- `sold[0] = 0`：第 `0` 天结束时不可能处于冷冻期
- `rest[0] = 0`：第 `0` 天不持有股票且不处于冷冻期

最终结果：最后一天的最大利润为 `max(sold[-1], rest[-1])`，因为最后一天如果还持有股票则不可能是最大利润

```js
```
```python
```